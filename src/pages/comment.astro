---
import Layout from '../layouts/Layout.astro';
import { CommentForm } from '../components/feedback/CommentForm';
import { getRestaurant } from '../services/api';

const restaurantId = Astro.url.searchParams.get('local');
const restaurant = restaurantId ? await getRestaurant(restaurantId) : null;

if (!restaurant) {
  return Astro.redirect('/404');
}
---

<Layout title="Dejanos tu comentario">
  <div class="min-h-screen px-4 py-8 flex flex-col items-center justify-center relative">
    <div class="absolute top-0 left-0 w-full h-full overflow-hidden z-0">
      <div class="float absolute top-10 right-20 w-28 h-28 bg-[#5F50E5] rounded-full opacity-15" style="animation-delay: -3s;"></div>
      <div class="float absolute bottom-20 left-10 w-36 h-36 bg-[#5F50E5] rounded-full opacity-15" style="animation-delay: -1.5s;"></div>
    </div>
    
    <h1 class="text-4xl font-bold mb-8 text-center relative z-10">
      <span class="bg-clip-text text-transparent bg-gradient-to-r from-white to-[#5F50E5]">
        Yuppie
      </span>
    </h1>
    
    <div class="w-full max-w-md bg-white/10 backdrop-blur-lg rounded-2xl p-6 shadow-lg relative z-10">
      <h2 class="text-2xl font-semibold mb-6 text-center">Dejanos tu comentario</h2>
      <CommentForm 
        client:load 
        restaurantId={restaurant.id}
        successUrl="/success"
      />
    </div>
  </div>
</Layout>

