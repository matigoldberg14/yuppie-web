---
import Layout from '../layouts/Layout.astro';
import { ImprovementSelector } from '../components/feedback/ImprovementSelector';
import { getRestaurant } from '../services/api';

const restaurantId = Astro.url.searchParams.get('local');
const restaurant = restaurantId ? await getRestaurant(restaurantId) : null;

if (!restaurant) {
  return Astro.redirect('/404');
}
---

<Layout title="¿En qué podríamos mejorar?">
  <div class="min-h-screen bg-black text-white px-4 py-8 flex flex-col items-center">
    <h1 class="text-3xl font-bold mb-12">Yuppie</h1>
    
    <ImprovementSelector 
      client:load 
      restaurantId={restaurant.id}
      nextUrl={`/comment?local=${restaurantId}`}
    />
  </div>
</Layout>