---
import Layout from '../layouts/Layout.astro';
import { ImprovementSelector } from '../components/feedback/ImprovementSelector';
import { getRestaurant } from '../services/api';

const restaurantId = Astro.url.searchParams.get('local');
const restaurant = restaurantId ? await getRestaurant(restaurantId) : null;

if (!restaurant) {
  return Astro.redirect('/404');
}
---

<Layout title="¿En qué podríamos mejorar?">
  <div class="min-h-screen px-4 py-8 flex flex-col items-center justify-center relative">
    <div class="absolute top-0 left-0 w-full h-full overflow-hidden z-0">
      <div class="pulse absolute top-20 right-10 w-40 h-40 bg-[#5F50E5] rounded-full opacity-10"></div>
      <div class="pulse absolute bottom-10 left-10 w-24 h-24 bg-[#5F50E5] rounded-full opacity-10" style="animation-delay: -1s;"></div>
    </div>
    
    <h1 class="text-4xl font-bold mb-8 text-center relative z-10">
      <span class="bg-clip-text text-transparent bg-gradient-to-r from-white to-[#5F50E5]">
        Yuppie
      </span>
    </h1>
    
    <div class="w-full max-w-md bg-white/10 backdrop-blur-lg rounded-2xl p-6 shadow-lg relative z-10">
      <h2 class="text-2xl font-semibold mb-6 text-center">¿En qué podríamos mejorar?</h2>
      <ImprovementSelector 
        client:load 
        restaurantId={restaurant.id}
        nextUrl={`/comment?local=${restaurantId}`}
      />
    </div>
  </div>
</Layout>

