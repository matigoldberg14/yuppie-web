---
import Layout from '../../layouts/Layout.astro';
import { LoginForm } from '../../components/auth/LoginForm';
import { getLangFromUrl } from '../../i18n/config';

const lang = getLangFromUrl(Astro.url);
---

<Layout title="Login | Yuppie">
  <div class="min-h-screen flex items-center justify-center">
    <LoginForm client:load lang={lang} />
  </div>
</Layout>

<script>
  import { auth } from '../../lib/firebase';
  import { onAuthStateChanged } from 'firebase/auth';

  if (auth) {
    onAuthStateChanged(auth, (user) => {
      if (user) {
        window.location.href = '/dashboard';
      }
    });
  }
</script>