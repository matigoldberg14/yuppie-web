---
import Layout from '../layouts/Layout.astro';
import { RatingForm } from '../components/feedback/Rating';
import { getRestaurant } from '../services/api';

const restaurantId = Astro.url.searchParams.get('local');
const restaurant = restaurantId ? await getRestaurant(restaurantId) : null;

if (!restaurant) {
  return Astro.redirect('/404');
}
---

<Layout title="Califica tu experiencia">
  <div class="min-h-screen bg-black text-white px-4 py-8 flex flex-col items-center">
    <h1 class="text-3xl font-bold mb-12">Yuppie</h1>
    
    <RatingForm 
      client:load 
      restaurantId={restaurant.id}
      nextUrl={`/improvement?local=${restaurantId}`}
    />
  </div>
</Layout>